/**
 * Win98 Cart Drawer Component
 * Transforms Shopify cart drawer into authentic Win98 dialog window
 */

/* ===== CART DRAWER WINDOW CONTAINER ===== */
.drawer {
  position: fixed !important;
  z-index: 1000 !important;
  left: 0 !important;
  top: 0 !important;
  width: 100vw !important;
  height: 100vh !important;
  display: flex !important;
  justify-content: flex-end !important;
  align-items: stretch !important;
  background-color: rgba(0, 0, 0, 0.5) !important;
  transition: visibility var(--duration-default) ease !important;
}

.drawer.active {
  visibility: visible !important;
}

/* ===== WIN98 DIALOG WINDOW ===== */
.drawer__inner {
  width: 480px !important;
  max-width: calc(100vw - 20px) !important;
  height: 100vh !important;
  background: #c0c0c0 !important;
  border: 2px outset #c0c0c0 !important;
  border-right: none !important;
  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.3) !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  transform: translateX(100%) !important;
  transition: transform var(--duration-default) ease !important;
  overflow: hidden !important;
  display: flex !important;
  flex-direction: column !important;
  padding: 0 !important;
}

.drawer__inner-empty {
  width: 480px !important;
  max-width: calc(100vw - 20px) !important;
  height: 100vh !important;
  background: #c0c0c0 !important;
  border: 2px outset #c0c0c0 !important;
  border-right: none !important;
  box-shadow: -2px 0 8px rgba(0, 0, 0, 0.3) !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  transform: translateX(100%) !important;
  transition: transform var(--duration-default) ease !important;
  overflow: hidden !important;
  display: flex !important;
  flex-direction: column !important;
  padding: 0 !important;
}

/* ===== ACTIVE STATE - SLIDE IN ===== */
.drawer.active .drawer__inner,
.drawer.active .drawer__inner-empty {
  transform: translateX(0) !important;
}

/* ===== WIN98 TITLE BAR ===== */
.drawer__header {
  background: linear-gradient(90deg, #000080 0%, #1084d0 100%) !important;
  color: white !important;
  padding: 2px 4px 2px 6px !important;
  font-size: 11px !important;
  font-weight: bold !important;
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  min-height: 20px !important;
  border-bottom: 1px solid #000040 !important;
  margin: 0 !important;
}

.drawer__heading {
  color: white !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  font-weight: bold !important;
  margin: 0 !important;
  flex: 1 !important;
  overflow: hidden !important;
  white-space: nowrap !important;
  text-overflow: ellipsis !important;
}

/* ===== WIN98 CLOSE BUTTON - Authentic 98.css Icon ===== */
.drawer__close {
  width: 16px !important;
  height: 16px !important;
  background: #c0c0c0 !important;
  box-shadow: inset -1px -1px #0a0a0a, inset 1px 1px #ffffff, inset -2px -2px #808080, inset 2px 2px #dfdfdf !important;
  border: none !important;
  font-size: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  cursor: pointer !important;
  position: relative !important;
  box-sizing: border-box !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  /* Authentic 98.css close icon */
  background-image: url('icon-close.svg') !important;
  background-repeat: no-repeat !important;
  background-position: center center !important;
  background-size: 8px 7px !important;
}

.drawer__close:hover {
  background-color: #dfdfdf !important;
  background-image: url('icon-close.svg') !important;
  background-repeat: no-repeat !important;
  background-position: center center !important;
  background-size: 8px 7px !important;
}

.drawer__close:active {
  box-shadow: inset -1px -1px #ffffff, inset 1px 1px #0a0a0a, inset -2px -2px #dfdfdf, inset 2px 2px #808080 !important;
  background-color: #c0c0c0 !important;
  background-image: url('icon-close.svg') !important;
  background-repeat: no-repeat !important;
  background-position: center center !important;
  background-size: 8px 7px !important;
}

.drawer__close:focus {
  outline: 1px dotted #000 !important;
  outline-offset: -4px !important;
}

/* Remove old text-based icon */
.drawer__close::after {
  display: none !important;
}

.drawer__close .svg-wrapper,
.drawer__close svg {
  display: none !important;
}

/* ===== WINDOW BODY ===== */
.drawer__inner > cart-drawer-items {
  background: #c0c0c0 !important;
  padding: 8px !important;
  flex: 0 0 auto !important;
  overflow: visible !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
}

.drawer__inner-empty > .cart-drawer__warnings {
  background: #c0c0c0 !important;
  padding: 8px !important;
  flex: 1 !important;
  overflow-y: auto !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  min-height: 0 !important;
}

/* Ensure cart drawer items container can scroll */
cart-drawer-items {
  display: flex !important;
  flex-direction: column !important;
  min-height: 0 !important;
  flex: 0 0 auto !important;
}

/* ===== WIN98 LISTVIEW STYLING ===== */
.drawer__contents {
  background: white !important;
  border: 2px inset #c0c0c0 !important;
  margin: 0 4px 8px 4px !important;
  height: calc(100vh - 280px) !important;
  max-height: calc(100vh - 280px) !important;
  min-height: 200px !important;
  overflow-y: scroll !important;
  overflow-x: hidden !important;
  flex-shrink: 0 !important;
}

/* ===== DIV-BASED CART LAYOUT ===== */
.cart-items {
  width: 100% !important;
  background: white !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
}

/* ===== HEADER ROW ===== */
.cart-items__header {
  display: grid !important;
  grid-template-columns: 80px 1fr 80px 100px !important;
  background: #c0c0c0 !important;
  border-bottom: 1px solid #808080 !important;
  position: sticky !important;
  top: 0 !important;
  z-index: 10 !important;
}

.cart-items__header > div {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  font-weight: bold !important;
  color: #000 !important;
  padding: 6px 8px !important;
  text-align: left !important;
  border-right: 1px solid #808080 !important;
  background: #c0c0c0 !important;
}

.cart-items__header > div:last-child {
  border-right: none !important;
}

.cart-header__total,
.cart-header__quantity {
  text-align: center !important;
}

/* ===== CART ITEMS BODY ===== */
.cart-items__body {
  display: flex !important;
  flex-direction: column !important;
}

.cart-item {
  display: grid !important;
  grid-template-columns: 80px 1fr 80px 100px !important;
  background: white !important;
  border-bottom: 1px solid #dfdfdf !important;
  min-height: 80px !important;
  align-items: center !important;
}

.cart-item:hover {
  background: #000080 !important;
  color: white !important;
}

.cart-item > div {
  padding: 8px !important;
  border-right: 1px solid #dfdfdf !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  overflow: hidden !important;
}

.cart-item > div:last-child {
  border-right: none !important;
}

.cart-item:hover > div {
  color: white !important;
}

/* ===== PRODUCT IMAGES ===== */
.cart-item__media {
  text-align: center !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.cart-item__image {
  width: 72px !important;
  height: 72px !important;
  border: none !important;
  object-fit: cover !important;
  background: white !important;
  display: block !important;
  margin: 0 auto !important;
}

/* ===== PRODUCT DETAILS ===== */
.cart-item__details {
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
}

.cart-item__name {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  font-weight: bold !important;
  color: inherit !important;
  text-decoration: none !important;
  display: block !important;
  margin: 0 0 4px 0 !important;
  line-height: 1.3 !important;
}

.cart-item__name:hover {
  color: inherit !important;
  text-decoration: underline !important;
}

.product-option {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 10px !important;
  color: #666 !important;
  margin: 2px 0 !important;
  line-height: 1.2 !important;
}

.cart-items tbody tr:hover .product-option {
  color: #ccc !important;
}

.price {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  font-weight: bold !important;
  color: inherit !important;
  margin-top: 4px !important;
  display: block !important;
}

/* ===== TOTAL PRICE COLUMN ===== */
.cart-item__totals {
  text-align: right !important;
  display: flex !important;
  align-items: center !important;
  justify-content: flex-end !important;
}

.cart-item__price-wrapper {
  display: flex !important;
  flex-direction: column !important;
  align-items: flex-end !important;
  gap: 2px !important;
}

.cart-item__discounted-prices {
  display: flex !important;
  flex-direction: column !important;
  align-items: flex-end !important;
  gap: 1px !important;
}

.cart-item__old-price {
  font-size: 10px !important;
  color: #999 !important;
  text-decoration: line-through !important;
}

.cart-items tbody tr:hover .cart-item__old-price {
  color: #ccc !important;
}

/* ===== ALL PRICE ELEMENTS 11PX ===== */
.price,
.price__sale,
.price__regular,
.cart-item__price-wrapper,
.cart-item__old-price,
.cart-item__final-price,
.totals__total-value,
.product-option {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
}

/* ===== QUANTITY CONTROLS COLUMN ===== */
.cart-item__quantity {
  text-align: center !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
}

.cart-item__quantity .quantity {
  all: unset !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 4px !important;
  width: 100% !important;
}

.cart-item__quantity .quantity__controls {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 2px !important;
  background: #c0c0c0 !important;
  border: 2px inset #c0c0c0 !important;
  padding: 2px !important;
}

/* Remove base.css styling from quantity elements */
.cart-item__quantity .quantity,
.cart-item__quantity .quantity__button,
.cart-item__quantity .quantity__input {
  all: unset !important;
}

/* Quantity buttons */
.cart-item__quantity .quantity__button {
  all: unset !important;
  width: 18px !important;
  height: 18px !important;
  background: #dfdfdf !important;
  border: 2px outset #dfdfdf !important;
  font-size: 0 !important;
  padding: 0 !important;
  margin: 0 !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-family: "MS Sans Serif", sans-serif !important;
  box-sizing: border-box !important;
}

.cart-item__quantity .quantity__button:hover {
  background: #ffffff !important;
}

.cart-item__quantity .quantity__button:active {
  border: 2px inset #dfdfdf !important;
}

.cart-item__quantity .quantity__button .svg-wrapper {
  width: 10px !important;
  height: 10px !important;
}

/* Quantity input */
.cart-item__quantity .quantity__input {
  all: unset !important;
  width: 32px !important;
  height: 18px !important;
  border: 2px inset #c0c0c0 !important;
  background: white !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 10px !important;
  text-align: center !important;
  padding: 1px !important;
  color: #000 !important;
  line-height: 14px !important;
  box-sizing: border-box !important;
}

.cart-item__quantity .quantity__input:focus {
  outline: none !important;
  border: 2px inset #c0c0c0 !important;
  background: white !important;
}

/* Remove button */
.cart-item__quantity .cart-remove-button {
  text-align: center !important;
  margin-top: 4px !important;
  width: 100% !important;
}

.cart-item__quantity .cart-remove-button button {
  background: #dfdfdf !important;
  border: 2px outset #dfdfdf !important;
  padding: 1px 4px !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 8px !important;
  cursor: pointer !important;
  height: 18px !important;
  min-width: 32px !important;
  box-sizing: border-box !important;
}

.cart-item__quantity .cart-remove-button button:hover {
  background: #ffffff !important;
}

.cart-item__quantity .cart-remove-button button:active {
  border: 2px inset #dfdfdf !important;
}

/* ===== FOOTER SECTION ===== */
.drawer__footer {
  background: #c0c0c0 !important;
  padding: 8px !important;
  border-top: 1px solid #808080 !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  flex-shrink: 0 !important;
}

/* ===== TOTALS SECTION ===== */
.totals {
  background: white !important;
  border: 2px inset #c0c0c0 !important;
  padding: 6px !important;
  margin: 8px 0 !important;
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
}

.totals__total {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  font-weight: bold !important;
  color: #000 !important;
  margin: 0 !important;
}

.totals__total-value {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  font-weight: bold !important;
  color: #000080 !important;
  margin: 0 !important;
}

/* ===== CHECKOUT BUTTON ===== */
.cart__checkout-button {
  width: 100% !important;
  height: 40px !important;
  background: #dfdfdf !important;
  border: 2px outset #dfdfdf !important;
  color: #000 !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  font-weight: bold !important;
  padding: 6px 12px !important;
  cursor: pointer !important;
  text-align: center !important;
  margin: 8px 0 0 0 !important;
  box-sizing: border-box !important;
}

.cart__checkout-button:hover {
  background: #ffffff !important;
}

.cart__checkout-button:active {
  border: 2px inset #dfdfdf !important;
}

.cart__checkout-button:disabled {
  background: #c0c0c0 !important;
  border: 2px outset #c0c0c0 !important;
  color: #808080 !important;
  cursor: not-allowed !important;
}

/* ===== CART NOTE SECTION ===== */
.cart__note .text-area {
  width: 100% !important;
  min-height: 60px !important;
  border: 2px inset #c0c0c0 !important;
  background: white !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  color: #000 !important;
  padding: 4px !important;
  resize: vertical !important;
}

.summary__title {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  color: #000 !important;
  cursor: pointer !important;
  display: flex !important;
  align-items: center !important;
  gap: 4px !important;
  margin: 8px 0 4px 0 !important;
}

/* ===== EMPTY CART STATE ===== */
.cart__empty-text {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  font-weight: bold !important;
  color: #000 !important;
  text-align: center !important;
  margin: 0 0 16px 0 !important;
}

.cart-drawer__empty-content {
  text-align: center !important;
  padding: 20px !important;
}

.cart-drawer__empty-content .button {
  background: #dfdfdf !important;
  border: 2px outset #dfdfdf !important;
  color: #000 !important;
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 11px !important;
  font-weight: bold !important;
  padding: 6px 12px !important;
  cursor: pointer !important;
  text-decoration: none !important;
  display: inline-block !important;
  margin: 8px 0 !important;
}

.cart-drawer__empty-content .button:hover {
  background: #ffffff !important;
  color: #000 !important;
  text-decoration: none !important;
}

.cart-drawer__empty-content .button:active {
  border: 2px inset #dfdfdf !important;
}

/* ===== TAX NOTE ===== */
.tax-note {
  font-family: "MS Sans Serif", sans-serif !important;
  font-size: 10px !important;
  color: #666 !important;
  margin: 4px 0 0 0 !important;
  line-height: 1.2 !important;
}

/* ===== MOBILE RESPONSIVE ADJUSTMENTS ===== */
@media (max-width: 749px) {
  .drawer__inner,
  .drawer__inner-empty {
    width: calc(100vw - 20px) !important;
    max-width: 400px !important;
    height: 100vh !important;
  }
  
  .drawer__contents {
    height: calc(100vh - 240px) !important;
    max-height: calc(100vh - 240px) !important;
    min-height: 180px !important;
  }
  
  /* Mobile grid layout */
  .cart-items__header {
    grid-template-columns: 60px 1fr 60px 70px !important;
  }
  
  .cart-items__header > div {
    padding: 4px 2px !important;
    font-size: 10px !important;
  }
  
  .cart-item {
    grid-template-columns: 60px 1fr 60px 70px !important;
    min-height: 90px !important;
  }
  
  .cart-item > div {
    padding: 6px 2px !important;
    font-size: 10px !important;
  }
  
  /* Mobile product image - no width needed for grid */
  
  .cart-item__image {
    width: 56px !important;
    height: 56px !important;
  }
  
  /* Mobile product details - padding handled by grid */
  
  .cart-item__name {
    font-size: 10px !important;
    margin-bottom: 2px !important;
  }
  
  .product-option {
    font-size: 9px !important;
  }
  
  .price {
    font-size: 10px !important;
    margin-top: 2px !important;
  }
  
  /* Mobile total prices */
  .cart-item__totals {
    font-size: 9px !important;
  }

  /* Mobile quantity controls - grid handles sizing */
  
  .cart-item__quantity .quantity {
    gap: 2px !important;
  }
  
  .cart-item__quantity .quantity__controls {
    gap: 1px !important;
    padding: 1px !important;
  }
  
  .cart-item__quantity .quantity__button {
    width: 16px !important;
    height: 16px !important;
  }
  
  .cart-item__quantity .quantity__input {
    width: 28px !important;
    height: 16px !important;
    font-size: 9px !important;
    line-height: 12px !important;
  }
  
  .cart-item__quantity .cart-remove-button {
    margin-top: 2px !important;
  }
  
  .cart-item__quantity .cart-remove-button button {
    font-size: 8px !important;
    height: 16px !important;
    min-width: 30px !important;
    padding: 1px 3px !important;
  }
}

/* ===== SCROLLBAR STYLING ===== */
.drawer__contents::-webkit-scrollbar {
  width: 16px !important;
  background: #c0c0c0 !important;
}

.drawer__contents::-webkit-scrollbar-thumb {
  background: #dfdfdf !important;
  border: 2px outset #dfdfdf !important;
  min-height: 20px !important;
}

.drawer__contents::-webkit-scrollbar-thumb:hover {
  background: #ffffff !important;
}

.drawer__contents::-webkit-scrollbar-thumb:active {
  border: 2px inset #dfdfdf !important;
  background: #dfdfdf !important;
}

.drawer__contents::-webkit-scrollbar-track {
  background: #808080 !important;
  border: 2px inset #c0c0c0 !important;
}

.drawer__contents::-webkit-scrollbar-corner {
  background: #c0c0c0 !important;
}

/* Firefox scrollbar */
.drawer__contents {
  scrollbar-width: auto !important;
  scrollbar-color: #dfdfdf #c0c0c0 !important;
}

/* ===== QUANTITY POPOVER FIXES ===== */
.drawer .quantity-popover-container,
.drawer .quantity-popover__info {
  max-width: none !important;
  width: auto !important;
  min-width: 0 !important;
}

.drawer .quantity-popover__info.global-settings-popup {
  max-width: 200px !important;
  width: auto !important;
  transform: translateX(-50%) !important;
}

/* ===== FORCE OVERRIDES ===== */
.drawer *,
.drawer__inner *,
.cart-drawer * {
  font-family: "MS Sans Serif", sans-serif !important;
  box-sizing: border-box !important;
}

/* Ensure slide animations work properly */
.drawer__inner,
.drawer__inner-empty {
  /* Transform and transition are handled above in main styles */
}

/* Ensure proper stacking order */
.drawer {
  z-index: 1000 !important;
}

.cart-drawer__overlay {
  display: none !important;
}